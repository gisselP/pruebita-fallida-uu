<div class="container mt-4">
  <!-- Título -->
  <div class="text-center mb-4">
    <h2>Agendar Cita</h2>
    <p class="text-muted">Programa una cita para tu mascota</p>
  </div>

  <div class="row">
    <!-- Formulario -->
    <div class="col-md-8 mx-auto">
      <div class="card shadow-sm">
        <div class="card-body p-4">
          <form [formGroup]="citaForm" (ngSubmit)="agendarCita()">
            
            <!-- Selección de mascota -->
            <div class="mb-3">
              <label class="form-label">Mascota</label>
              <select class="form-select" formControlName="mascotaId">
                <option value="">Selecciona una mascota</option>
                @for (mascota of mascotas; track mascota.id) {
                  <option  [value]="mascota.id">
                  {{ mascota.nombre }} - {{ mascota.especie }}
                </option>
                }
                
              </select>
            </div>

            <!-- Fecha -->
            <div class="mb-3">
              <label class="form-label">Fecha</label>
              <input 
                type="date" 
                class="form-control" 
                formControlName="fecha"
                [min]="fechaMinima">
            </div>

            <!-- Hora -->
            <div class="mb-3">
              <label class="form-label">Hora</label>
              <select class="form-select" formControlName="hora">
                <option value="">Selecciona una hora</option>
                <option value="09:00">09:00 AM</option>
                <option value="10:00">10:00 AM</option>
                <option value="11:00">11:00 AM</option>
                <option value="14:00">02:00 PM</option>
                <option value="15:00">03:00 PM</option>
                <option value="16:00">04:00 PM</option>
                <option value="17:00">05:00 PM</option>
              </select>
            </div>

            <!-- Veterinario -->
            <div class="mb-3">
              <label class="form-label">Veterinario</label>
              <select class="form-select" formControlName="veterinarioId">
                <option value="">Selecciona un veterinario</option>
                 @for (vet of veterinarios; track vet.id) {
                  <option  [value]="vet.id">
                  Dr. {{ vet.nombre }} {{ vet.apellido }}
                </option>
                }
              </select>
            </div>

            <!-- Motivo -->
            <div class="mb-3">
              <label class="form-label">Motivo</label>
              <select class="form-select" formControlName="motivo">
                <option value="">Selecciona el motivo</option>
                <option value="Control general">Control general</option>
                <option value="Vacunación">Vacunación</option>
                <option value="Desparasitación">Desparasitación</option>
                <option value="Emergencia">Emergencia</option>
              </select>
            </div>

            <!-- Observaciones -->
            <div class="mb-3">
              <label class="form-label">Observaciones (opcional)</label>
              <textarea 
                class="form-control" 
                rows="3" 
                formControlName="observaciones"
                placeholder="Describe los síntomas...">
              </textarea>
            </div>

            <!-- Botones -->
            <div class="d-flex gap-2 justify-content-end">
              <button type="button" class="btn btn-secondary" routerLink="/citas">
                Cancelar
              </button>
              <button type="submit" class="btn btn-primary" [disabled]="citaForm.invalid">
                Agendar
              </button>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</div>